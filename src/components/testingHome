import React from 'react';
import StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';
import firebase from 'firebase';
import * as firebaseui from 'firebaseui';
import { fire, facebookProvider } from '../fire';

import Dashboard from './dashboard';
import monthlySamples from './monthlySamples';

import uploadDocument from './uploadDocument';
import profilePage from './profilePage';

import maintenanceReports from './assetManager/maintenanceReports';
import vendorContacts from './assetManager/vendorContacts';
import equipmentList from './assetManager/equipmentList';
import chemicalApplications from './assetManager/chemicalApplications';
import fishStocking from './assetManager/fishStocking';

import lake from './images/lake.jpg';
import lake2 from './images/lake2.png';

import { Link } from 'react-router-dom';
import { StickyContainer, Sticky } from 'react-sticky';
import { PanelGroup, Popover, Panel, Grid, Collapse, Well, ListGroup, ListGroupItem, Nav, NavItem, Jumbotron, OverlayTrigger, Tab, Tabs } from 'react-bootstrap';
import { TiArrowSortedDown, TiUser, TiArrowSortedUp, TiPencil, TiTrash } from "react-icons/ti";
import { MdPlayCircleOutline } from "react-icons/md";
import { Row, Col, Drawer, Button, Layout, Carousel } from 'antd';

import { BrowserRouter, Route } from 'react-router-dom';

import 'antd/dist/antd.css';


const {
  Header, Footer, Sider, Content,
} = Layout;

const styles = {
  sidenav: {
    height: '100vh',
    width: '180px',/* Set the width of the sidebar */
    position: 'sticky',
    overflowx: 'hidden',
    zindex: 1,
    top: 0, /* Stay at the top */
    left: 0,
    backgroundColor: '#E6E6E6', /* Fixed Sidebar (stay in place on scroll) */
    paddingTop: "50px",
},
background: {
  backgroundColor: '#FFFFFF',
  height: '100%'
   /* Fixed Sidebar (stay in place on scroll) */

},

  panelWidth: {
    width: '100%',
    left: '1px',
    paddingleft: '0px',
    center: 'auto',
    opacity: 10,


  },
  topPad: {
    paddingTop: "50px"
  },
  bottomPad: {
    paddingBottom: "15px"
  },


}
// Configure Firebase.



const popoverRight = (
  <Popover id="popover-positioned-right" title="Popover right">
    <strong>Holy guacamole!</strong> Check this info.
  </Popover>
);

const popoverRightSampling = (
  <Popover id="popover-positioned-right" title="Sampling Reports">
    <strong>Water Quality</strong>
      <NavItem componentClass={Link} href="/monthlySamples" to="/monthlySamples">
      Monthly Samples
    </NavItem>

  </Popover>
);

const popoverRightProfile = (
  <Popover id="popover-positioned-right" title="Profile">
    <strong>Profile</strong>
      <NavItem componentClass={Link} href="/profilePage" to="/profilePage">
      Information
    </NavItem>



  </Popover>
);

const popoverRightAsset = (
  <Popover id="popover-trigger-focus" title="Asset Manager">
    <strong>Operations and Maintenance</strong>

    <NavItem componentClass={Link} href="/maintenanceReports" to="/maintenanceReports">
      Maintenance Reports
    </NavItem>
    <NavItem componentClass={Link} href="/vendorContacts" to="/vendorContacts">
      Vendor Contacts
    </NavItem>
    <NavItem componentClass={Link} href="/equipmentList" to="/equipmentList">
      Equipment List
    </NavItem>
    <NavItem componentClass={Link} href="/chemicalApplications" to="/chemicalApplications">
      Chemical Applications
    </NavItem>
    <NavItem componentClass={Link} href="/fishStocking" to="/fishStocking">
      Fish Stocking
    </NavItem>




  </Popover>
);

const popoverRightDocuments = (
  <Popover id="popover-trigger-focus" title="Popover bottom">
    <strong>Documents</strong>
      <NavItem componentClass={Link} href="/uploadDocument" to="/uploadDocument">
      Documents
    </NavItem>
  </Popover>

);

class SignInScreen extends React.Component {
  constructor(props, context) {
    super(props, context);

    this.state = {
      open: false,
      open1: false,
      open2: false,
      visible: false,
      placement: 'right',



    };

  }
  showDrawer = () => {
    this.setState({
      visible: true,
    });
  };

  onClose = () => {
    this.setState({
      visible: false,
    });
  };

  onChange = (e) => {
    this.setState({
      placement: e.target.value,
    });
  }


  // The component's Local state.
  state = {
    isSignedIn: false // Local signed-in state.
  };

  // Configure FirebaseUI.
  uiConfig = {
    credentialHelper: firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM,
    // Popup signin flow rather than redirect flow.
    signInFlow: 'popup',
    'credentialHelper': firebaseui.auth.CredentialHelper.NONE,
    signInSuccessUrl: '/home',

    // We will display Google and Facebook as auth providers.
    signInOptions: [
      firebase.auth.EmailAuthProvider.PROVIDER_ID,
      firebaseui.auth.CredentialHelper.NONE
    ],
    callbacks: {
      // Avoid redirects after sign-in.
      signInSuccessWithAuthResult: () => false
    }
  };

  closePopover = () => {
    this.state = {
      open: false,
      open1: false,
      open2: false,

    };

  }

  // Listen to the Firebase Auth state and set the local state.
  componentDidMount() {
    this.unregisterAuthObserver = firebase.auth().onAuthStateChanged(
        (user) => this.setState({isSignedIn: !!user})
    );
  }

  // Make sure we un-register Firebase observers when the component unmounts.
  componentWillUnmount() {
    this.unregisterAuthObserver();
  }

  render() {
    if (!this.state.isSignedIn) {
      return (

        <Layout>
              <Header style={{ backgroundColor: '#ECECEC'}}>

                <Row style={{paddingTop: '10px'}}>
              <Col span={12}>
                <h1>Lakistry</h1>

              </Col>
              <Col offset={8} span={4}><Button type="primary" onClick={this.showDrawer}>
                  <TiUser size={20} />Login
                </Button><Drawer
                  title= "Login"
                  placement={this.state.placement}
                  closable={false}
                  onClose={this.onClose}
                  visible={this.state.visible}
                  width={300}
                >
                  <StyledFirebaseAuth uiConfig={this.uiConfig} firebaseAuth={firebase.auth()}/>
                </Drawer></Col>

            </Row>


              </Header>
              <Content>


            <Row>

              <Col span={24}>
                <Carousel autoplay>
    <div style={{position: 'relative'}} ><img src={lake2} style={{width: '100%', height: '100%'}} /> <Button size="large" type="normal" style={{ position: 'absolute',
  top: '60%',
  left: '10%'}}><h3>Request Demo</h3> </Button>
<div style={{ position: 'absolute',
top: '40%',
left: '10%'}}>
<h1 style={{color: 'white'}}>Lake Management</h1>
<h1 style={{color: 'white'}}>Made Simple</h1>
</div>
  </div>

  </Carousel>


              </Col>

            </Row>
            <Row>
              <Col span={6}>col-6</Col>
              <Col span={6}>col-6</Col>
              <Col span={6}>col-6</Col>
              <Col span={6}>col-6</Col>
            </Row>



              </Content>
              <Footer>Footer</Footer>
            </Layout>




















      );
    }
    return (
      <div style={styles.background} >

        <Row style={styles.background}>

          <Col xs={5} sm={5} md={5}>
            <StickyContainer style={{position: 'fixed'}}>

            <Panel style={styles.sidenav}>
              <Panel.Body>


  <ListGroup style={styles.panelWidth}>
  <ListGroupItem >
    <NavItem componentClass={Link} href="/dashboard" to="/dashboard">
      Dashboard
    </NavItem>


  </ListGroupItem>



  <OverlayTrigger rootClose="true" trigger="click" placement="right" overlay={popoverRightSampling}>
 <ListGroupItem>Sampling</ListGroupItem>
 </OverlayTrigger>

    <OverlayTrigger rootClose="true" trigger="click" placement="right" overlay={popoverRightAsset}>
    <ListGroupItem>Asset Manager</ListGroupItem>
    </OverlayTrigger>

    <OverlayTrigger rootClose="true" trigger="click" placement="right" overlay={popoverRightDocuments}>
   <ListGroupItem>Documents</ListGroupItem>
   </OverlayTrigger>

   <OverlayTrigger rootClose="true" trigger="click" placement="right" overlay={popoverRightProfile}>
  <ListGroupItem>Profile</ListGroupItem>
  </OverlayTrigger>




</ListGroup>
<Button bsStyle="info" onClick={() => firebase.auth().signOut()}>Sign Out

</Button>



              </Panel.Body>
</Panel>
</StickyContainer>





          </Col>
          <Col style={styles.background} mdOffset={2} smOffset={2} xsOffset={2} xs={8} sm={8} md={8}>

            <Route exact path="/" component={Dashboard} />
            <Route path="/dashboard" component={Dashboard} />
            <Route path="/monthlySamples" component={monthlySamples} />
            <Route path="/maintenanceReports" component={maintenanceReports} />
            <Route path="/vendorContacts" component={vendorContacts} />
            <Route path="/uploadDocument" component={uploadDocument} />
            <Route path="/profilePage" component={profilePage} />
            <Route path="/equipmentList" component={equipmentList} />
            <Route path="/chemicalApplications" component={chemicalApplications} />
            <Route path="/fishStocking" component={fishStocking} />


            </Col>
        </Row>








      </div>
    );
  }
}
export default SignInScreen;
